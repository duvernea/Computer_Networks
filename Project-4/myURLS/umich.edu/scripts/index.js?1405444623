
(function($,window,document,Math,undefined){var div=$("<div>")[0],rsrc=/url\(["']?(.*?)["']?\)/,watched=[],positions={top:0,left:0,bottom:1,right:1,center:.5};if("backgroundSize"in div.style&&!$.debugBGS){return;}
$.cssHooks.backgroundSize={set:function(elem,value){var firstTime=!$.data(elem,"bgsImg"),pos,$wrapper,$img;$.data(elem,"bgsValue",value);if(firstTime){watched.push(elem);$.refreshBackgroundDimensions(elem,true);$wrapper=$("<div>").css({position:"absolute",zIndex:-1,top:0,right:0,left:0,bottom:0,overflow:"hidden"});$img=$("<img>").css({position:"absolute"}).appendTo($wrapper),$wrapper.prependTo(elem);$.data(elem,"bgsImg",$img[0]);pos=($.css(elem,"backgroundPosition")||$.css(elem,"backgroundPositionX")+" "+$.css(elem,"backgroundPositionY")).split(" ");$.data(elem,"bgsPos",[positions[pos[0]]||parseFloat(pos[0])/100,positions[pos[1]]||parseFloat(pos[1])/100]);$.css(elem,"zIndex")=="auto"&&(elem.style.zIndex=0);$.css(elem,"position")=="static"&&(elem.style.position="relative");$.refreshBackgroundImage(elem);}else{$.refreshBackground(elem);}},get:function(elem){return $.data(elem,"bgsValue")||"";}};$.cssHooks.backgroundImage={set:function(elem,value){return $.data(elem,"bgsImg")?$.refreshBackgroundImage(elem,value):value;}};$.refreshBackgroundDimensions=function(elem,noBgRefresh){var $elem=$(elem),currDim={width:$elem.innerWidth(),height:$elem.innerHeight()},prevDim=$.data(elem,"bgsDim"),changed=!prevDim||currDim.width!=prevDim.width||currDim.height!=prevDim.height;$.data(elem,"bgsDim",currDim);if(changed&&!noBgRefresh){$.refreshBackground(elem);}};$.refreshBackgroundImage=function(elem,value){var img=$.data(elem,"bgsImg"),currSrc=(rsrc.exec(value||$.css(elem,"backgroundImage"))||[])[1],prevSrc=img&&img.src,changed=currSrc!=prevSrc,imgWidth,imgHeight;if(changed){img.style.height=img.style.width="auto";img.onload=function(){var dim={width:img.width,height:img.height};if(dim.width==1&&dim.height==1){return;}
$.data(elem,"bgsImgDim",dim);$.data(elem,"bgsConstrain",false);$.refreshBackground(elem);img.style.visibility="visible";img.onload=null;};img.style.visibility="hidden";img.src=currSrc;if(img.readyState||img.complete){img.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";img.src=currSrc;}
elem.style.backgroundImage="none";}};$.refreshBackground=function(elem){var value=$.data(elem,"bgsValue"),elemDim=$.data(elem,"bgsDim"),imgDim=$.data(elem,"bgsImgDim"),$img=$($.data(elem,"bgsImg")),pos=$.data(elem,"bgsPos"),prevConstrain=$.data(elem,"bgsConstrain"),currConstrain,elemRatio=elemDim.width/elemDim.height,imgRatio=imgDim.width/imgDim.height,delta;if(value=="contain"){if(imgRatio>elemRatio){$.data(elem,"bgsConstrain",(currConstrain="width"));delta=Math.floor((elemDim.height-elemDim.width/imgRatio)*pos[1]);$img.css({top:delta});if(currConstrain!=prevConstrain){$img.css({width:"100%",height:"auto",left:0});}}else{$.data(elem,"bgsConstrain",(currConstrain="height"));delta=Math.floor((elemDim.width-elemDim.height*imgRatio)*pos[0]);$img.css({left:delta});if(currConstrain!=prevConstrain){$img.css({height:"100%",width:"auto",top:0});}}}else if(value=="cover"){if(imgRatio>elemRatio){$.data(elem,"bgsConstrain",(currConstrain="height"));delta=Math.floor((elemDim.height*imgRatio-elemDim.width)*pos[0]);$img.css({left:-delta});if(currConstrain!=prevConstrain){$img.css({height:"100%",width:"auto",top:0});}}else{$.data(elem,"bgsConstrain",(currConstrain="width"));delta=Math.floor((elemDim.width/imgRatio-elemDim.height)*pos[1]);$img.css({top:-delta});if(currConstrain!=prevConstrain){$img.css({width:"100%",height:"auto",left:0});}}}}
var $event=$.event,$special,dummy={_:0},frame=0,wasResized,animRunning;$special=$event.special.throttledresize={setup:function(){$(this).on("resize",$special.handler);},teardown:function(){$(this).off("resize",$special.handler);},handler:function(event,execAsap){var context=this,args=arguments;wasResized=true;if(!animRunning){$(dummy).animate(dummy,{duration:Infinity,step:function(){frame++;if(frame>$special.threshold&&wasResized||execAsap){event.type="throttledresize";$event.dispatch.apply(context,args);wasResized=false;frame=0;}
if(frame>9){$(dummy).stop();animRunning=false;frame=0;}}});animRunning=true;}},threshold:1};$(window).on("throttledresize",function(){$(watched).each(function(){$.refreshBackgroundDimensions(this);});});})(jQuery,window,document,Math);$(document).ready(function(){var features=$('#large-features');var ieHackLoaded=false;if(features.find('> ul li').length>1){var firstItem=features.find('> ul li:eq(0)');var lastItem=features.find('> ul li:last-child');firstItem.clone().addClass('cloned').appendTo(features.find('> ul'));lastItem.clone().addClass('cloned').prependTo(features.find('> ul'));var numFeatures=features.find('> ul > li').length;features.find('> ul').css({left:'-'+((numFeatures*100)/numFeatures)+'%',width:(numFeatures*100)+'%'});features.find('> ul > li').css({width:(100/numFeatures)+'%',display:'block'});var featureNav=features.find('.nav');var liDist=(numFeatures*100)/numFeatures;featureNav.show(0);var featureWidthTimer=false;var featureWidthFix=function(){if($(window).width()>$('.wrapper').width()){features.find('>  ul > li').width($(window).width());}
else{features.find('>  ul > li').width($('.wrapper').width());}}
$(window).resize(function(){if(featureWidthTimer){clearTimeout(featureWidthTimer);}
features.find('>  ul > li').width((100/numFeatures)+'%');featureWidthTimer=setTimeout(featureWidthFix,200);if(features.find('.feature-copy').css('float')=='none'){var featureCopyHeight=0;features.find('.feature-copy').height('');features.find('.feature-copy').each(function(){if($(this).height()>featureCopyHeight){featureCopyHeight=$(this).height();}});features.find('.feature-copy').height(featureCopyHeight);}
else{features.find('.feature-copy').height('');}}).trigger('resize');featureNav.find('li.prev, li.next').on('click touchstart',function(){var thisNavLi=$(this);var offset=parseInt(features.find('> ul').css('left'),10);var liWidth=features.find('> ul > li').width();var elemNum=Math.round(Math.abs(offset)/liWidth);features.find('> ul > li:eq('+elemNum+') .feature-copy').fadeTo('default',0,function(){features.find('> ul > li .feature-copy').css('opacity',0);if(thisNavLi.hasClass('prev')){if(elemNum==1){features.find('> ul').animate({left:0},1000,function(){$(this).css('left','-'+(liDist*(numFeatures-2))+'%');$(this).find('.feature-copy').fadeTo('default',1);var className='';if($(this).find('li:eq('+(numFeatures-2)+')').hasClass('light')){className='light';}
else if($(this).find('li:eq('+(numFeatures-2)+')').hasClass('dark')){className='dark';}
if(className){features.find('> .nav').removeClass('light').removeClass('dark').addClass(className);}});}
else{features.find('> ul').animate({left:'-'+(liDist*(elemNum-1))+'%'},1000,function(){$(this).find('.feature-copy').fadeTo('default',1);var className='';if($(this).find('li:eq('+(elemNum-1)+')').hasClass('light')){className='light';}
else if($(this).find('li:eq('+(elemNum-1)+')').hasClass('dark')){className='dark';}
if(className){features.find('> .nav').removeClass('light').removeClass('dark').addClass(className);}});}}
else if(thisNavLi.hasClass('next')){if(elemNum==(numFeatures-2)){features.find('> ul').animate({left:'-'+(liDist*(numFeatures-1))+'%'},1000,function(){$(this).css('left','-'+liDist+'%');$(this).find('.feature-copy').fadeTo('default',1);var className='';if($(this).find('li:eq('+(numFeatures-1)+')').hasClass('light')){className='light';}
else if($(this).find('li:eq('+(numFeatures-1)+')').hasClass('dark')){className='dark';}
if(className){features.find('> .nav').removeClass('light').removeClass('dark').addClass(className);}});}
else{features.find('> ul').animate({left:'-'+(liDist*(elemNum+1))+'%'},1000,function(){$(this).find('.feature-copy').fadeTo('default',1);var className='';if($(this).find('li:eq('+(elemNum+1)+')').hasClass('light')){className='light';}
else if($(this).find('li:eq('+(elemNum+1)+')').hasClass('dark')){className='dark';}
if(className){features.find('> .nav').removeClass('light').removeClass('dark').addClass(className);}});}}});});}
features.swipe({triggerOnTouchEnd:false,triggerOnTouchLeave:true,threshold:100,swipeLeft:function(event,direction,distance,duration,fingers){$(this).find('.nav .next').trigger('click');},swipeRight:function(event,direction,distance,duration,fingers){$(this).find('.nav .prev').trigger('click');}});$(window).resize(function(){var minheight=parseInt($('#infographics').height(),10);if(parseInt($('#infographics').css('marginTop'),10)!=0){minheight+=400;}
if($('#main-header').css('position')=='absolute'){minheight+=80;}
var maxheight=0;if($('#large-features > ul > li').css('maxHeight')){maxheight=$('#large-features > ul > li').css('maxHeight');}
else{maxheight=$('#large-features > ul > li').css('height');}
$('#large-features > ul > li').css({minHeight:minheight,maxHeight:maxheight});var height=window.innerHeight?window.innerHeight:$(window).height();if(parseInt($('#infographics').css('marginTop'),10)!=0){height+=(1*parseInt($('#infographics li').height(),10));}
if(height<parseInt($('#large-features > ul > li').css('minHeight'),10)){height=$('#large-features > ul > li').css('minHeight');}
if((height>($(window).width()/1.1))&&($(window).width()<=795)){height=$(window).width()/1.1;height+=$('#large-features > ul > li .feature-copy').height();if(minheight>height){$('#large-features > ul > li').css('minHeight',height);}}
$('#large-features > ul > li').height(height);if(navigator.appVersion.indexOf("MSIE 7.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1){if(!ieHackLoaded){ieHackLoaded=true;features.find('> ul li .background-image').each(function(idx){$(this).closest('li').attr('data-idx',idx);$('<img/>').attr('data-idx',idx).attr('src',$(this).css('backgroundImage').replace('url(','').replace(')','').replace(/"/g,'')+'?random='+new Date().getTime()).on('load',function(){var newDimensions=calculateAspectRatioFit(this.width,this.height,$('#large-features > ul > li').width(),$('#large-features > ul > li').height());var imgSrc=features.find('> ul li[data-idx='+$(this).attr('data-idx')+'] .background-image').css('backgroundImage').replace('url(','').replace(')','').replace(/"/g,'');features.find('> ul li[data-idx='+$(this).attr('data-idx')+'] .background-image').css({width:newDimensions.width,height:newDimensions.height,marginLeft:'-'+((newDimensions.width-$('#large-features > ul > li').width())/2)+'px',filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader( src='"+imgSrc+"', sizingMethod='scale')"}).attr('data-img-width',this.width).attr('data-img-height',this.height);});});}
else{features.find('> ul li .background-image').each(function(idx){var newDimensions=calculateAspectRatioFit($(this).attr('data-img-width'),$(this).attr('data-img-height'),$('#large-features > ul > li').width(),$('#large-features > ul > li').height());$(this).css({width:newDimensions.width,height:newDimensions.height,marginLeft:'-'+((newDimensions.width-$('#large-features > ul > li').width())/2)+'px',});});}}}).trigger('resize');});function calculateAspectRatioFit(srcWidth,srcHeight,maxWidth,maxHeight)
{var ratio=Math.max(maxWidth/srcWidth,maxHeight/srcHeight);return{width:srcWidth*ratio,height:srcHeight*ratio};}